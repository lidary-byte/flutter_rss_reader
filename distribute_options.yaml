variables:
  PGYER_API_KEY: "7a489216096752e7cd3d0d99562f0525"
output: dist/
releases:
  - name: aread
    jobs:
      - name: android-aab
        package:
          platform: android
          target: aab
          build_args:
            profile: true
            # target-platform: android-arm,android-arm64
      - name: android-apk
        package:
          platform: android
          target: apk
          build_args:
            profile: true
            split-per-abi:
            # target-platform: android-arm64,android-arm,android-x64,android-x86
          publish_to: pgyer
      - name: ios-ipa
        package:
          platform: ios
          target: ipa
          build_args:
            profile: true
            export-method: ad-hoc
      - name: linux-appimage
        package:
          platform: linux
          target: appimage
          build_args:
            profile: true
      - name: linux-deb
        package:
          platform: linux
          target: deb
          build_args:
            profile: true
      - name: linux-zip
        package:
          platform: linux
          target: zip
          build_args:
            profile: true
      - name: macos-dmg
        package:
          platform: macos
          target: dmg
          build_args:
            profile: true
      - name: macos-zip
        package:
          platform: macos
          target: zip
          build_args:
            profile: true
      - name: windows-exe
        package:
          platform: windows
          target: exe
          build_args:
            profile: true
      # msix does not support profile mode yet
      # - name: windows-msix
      #   package:
      #     platform: windows
      #     target: msix
      #     build_args:
      #       profile: true
      - name: windows-zip
        package:
          platform: windows
          target: zip
          build_args:
            profile: true
  - name: dev-release
    jobs:
      - name: android-aab
        variables:
          FLUTTER_ROOT: ~/fvm/versions/3.10.2
        package:
          platform: android
          target: aab
          build_args:
            target-platform: android-arm,android-arm64
      - name: android-apk
        package:
          platform: android
          target: apk
          build_args:
            target-platform: android-arm,android-arm64
      - name: ios-ipa
        package:
          platform: ios
          target: ipa
          build_args:
            export-method: ad-hoc
      - name: linux-appimage
        package:
          platform: linux
          target: appimage
      - name: linux-deb
        package:
          platform: linux
          target: deb
      - name: linux-zip
        package:
          platform: linux
          target: zip
      - name: macos-dmg
        package:
          platform: macos
          target: dmg
      - name: macos-pkg
        package:
          platform: macos
          target: pkg
      - name: macos-zip
        package:
          platform: macos
          target: zip
      - name: windows-exe
        package:
          platform: windows
          target: exe
      - name: windows-msix
        package:
          platform: windows
          target: msix
      - name: windows-zip
        package:
          platform: windows
          target: zip
      - name: web-direct
        package:
          platform: web
          target: direct